var discoverMovies=function(){var e=[],t="https://api.themoviedb.org/3/discover/movie?api_key=ee0326c2a9a0b787ee75f169ae1003ff&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=1";function n(t){e.push(t)}function i(e){a(e).then(function(){console.log(e),r(e)})}function a(e){return fetch(t).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.poster_path,e.releaseDate=t.release_date,e.overview=t.overview}).catch(function(e){console.error(e)})}var o=document.querySelector("#modal-container");function r(e){o.innerHTML="";var t=document.createElement("div");t.classList.add("modal");var n=document.createElement("button");n.classList.add("modal-close"),n.innerText="Close",n.addEventListener("click",s);var i=document.createElement("h1");i.innerText=e.name;var a=document.createElement("p");a.innerText="Release date : "+e.release;var r=document.createElement("p");r.innerText="Overview : "+e.detailsUrl;var l=document.createElement("img");l.classList.add("modal-img"),l.setAttribute("src","https://image.tmdb.org/t/p/original"+e.posterUrl),t.appendChild(n),t.appendChild(i),t.appendChild(a),t.appendChild(r),t.appendChild(l),o.appendChild(t),o.classList.add("is-visible")}function s(){o.classList.remove("is-visible")}return window.addEventListener("keydown",e=>{"Escape"===e.key&&o.classList.contains("is-visible")&&s()}),o.addEventListener("click",e=>{e.target===o&&s()}),{add:n,getAll:function(){return e},loadList:function(){return fetch(t).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){n(e={name:e.title,detailsUrl:e.overview,release:e.release_date,posterUrl:e.poster_path}),console.log(e)})}).catch(function(e){console.error(e)})},addListItem:function(e){var t=document.querySelector(".movie-list"),n=document.createElement("li"),a=document.createElement("button");a.innerText=e.name,a.classList.add("list-class"),n.appendChild(a),t.appendChild(n),a.addEventListener("click",function(t){i(e)})},showDetails:i,loadDetails:a,showModal:r,hideModal:s}}();discoverMovies.loadList().then(function(){discoverMovies.getAll().forEach(function(e){discoverMovies.addListItem(e)})});